# React Forms Comparison Demo

A complete, working demonstration comparing **traditional React form management** (useState) with the **modern approach** (React Hook Form + React Query + Orval).

## Quick Start

### 1. Install Dependencies
```bash
# Install main project dependencies
npm install

# Install mock server dependencies
cd mock-server && npm install && cd ..
```

### 2. Start the Mock Server (Terminal 1)
```bash
cd mock-server
npm start
```

Server runs on **http://localhost:3001**

### 3. Start the React App (Terminal 2)
```bash
npm run dev
```

App runs on **http://localhost:5173**

## What's Included

### ğŸ“ Files Created

#### Configuration
- `openapi.yaml` - OpenAPI 3.0 specification defining the User Profile API
- `orval.config.ts` - Orval configuration for generating TypeScript client
- `package.json` - Main project dependencies
- `vite.config.ts` - Vite build configuration
- `tsconfig.json` - TypeScript configuration

#### Backend (Mock API Server)
- `mock-server/server.js` - Express server with GET/PUT endpoints
- `mock-server/package.json` - Server dependencies

#### Frontend
- `src/main.tsx` - React entry point
- `src/App.tsx` - Main app with QueryClientProvider and side-by-side forms
- `src/components/TraditionalForm.tsx` - Traditional useState approach (~250 lines)
- `src/components/ModernForm.tsx` - Modern approach with React Hook Form + React Query (~120 lines)
- `src/api/custom-instance.ts` - Custom Axios configuration
- `src/api/generated.ts` - **Generated by Orval** (TypeScript API client with React Query hooks)
- `src/api/model/` - Generated TypeScript types from OpenAPI spec

#### Documentation
- `README.md` - This file (quick overview)
- `SETUP.md` - Detailed setup and usage instructions
- `COMPARISON.md` - In-depth comparison of both approaches

## The Comparison at a Glance

| Aspect | Traditional (useState) | Modern (RHF + RQ) |
|--------|----------------------|-------------------|
| **Lines of Code** | ~250 | ~120 (52% less) |
| **useState hooks** | 13 | 0 |
| **useEffect hooks** | 2 | 0 |
| **Manual handlers** | 7+ | 1 |
| **Boilerplate** | Extensive | Minimal |
| **Type Safety** | Manual | Automatic (from OpenAPI) |

## Key Features Demonstrated

### Both Forms Include:
- âœ… 5 form fields (firstName, lastName, email, phoneNumber, bio)
- âœ… Required field validation
- âœ… Loading states with visual indicators
- âœ… Error message display
- âœ… Success message display
- âœ… Dirty state tracking (enable Save button only when changed)
- âœ… Reset functionality to restore original values
- âœ… Real API integration with mock server

### Modern Approach Benefits:
- ğŸš€ **52% less code** than traditional approach
- ğŸ”’ **Automatic type safety** from OpenAPI specification
- âš¡ **Better performance** (uncontrolled components)
- ğŸ¯ **Less boilerplate** (no manual onChange handlers)
- ğŸ”„ **Built-in caching** (React Query)
- ğŸ› ï¸ **Easier maintenance** (update OpenAPI spec, regenerate)

## Technologies Used

### Frontend
- **React 18** - UI library
- **TypeScript** - Type safety
- **Vite** - Build tool and dev server
- **React Hook Form** - Modern form state management
- **React Query (TanStack Query)** - Server state management
- **Axios** - HTTP client
- **Orval** - OpenAPI to TypeScript/React Query code generator

### Backend (Mock)
- **Express** - Web server
- **CORS** - Cross-origin support
- **In-memory database** with 3 sample users

## API Endpoints

The mock server provides:

- **GET /api/users/:userId** - Fetch user profile (500ms simulated delay)
- **PUT /api/users/:userId** - Update user profile (800ms simulated delay)

Sample user IDs: `1`, `2`, `3`

## How the Modern Approach Works

1. **OpenAPI Spec** (`openapi.yaml`) defines the API contract
2. **Orval** reads the spec and generates:
   - TypeScript types for requests/responses
   - React Query hooks (`useGetUserProfile`, `useUpdateUserProfile`)
   - Axios client with type safety
3. **React Hook Form** manages form state (no useState needed)
4. **React Query** manages server state (no useEffect needed)
5. **Result**: Less code, better types, easier maintenance

## Development Workflow

### Making API Changes

1. Edit `openapi.yaml` to modify endpoints or schemas
2. Regenerate the client:
   ```bash
   npm run generate-api
   ```
3. Update components to use new types/hooks
4. TypeScript will catch any breaking changes

### Example: Adding a New Field

1. Add `country` field to `openapi.yaml`:
   ```yaml
   UserProfile:
     properties:
       country:
         type: string
         nullable: true
   ```

2. Regenerate: `npm run generate-api`

3. Update forms - TypeScript will show you where to add the new field

4. Update mock server to handle the new field

## Documentation

- **[SETUP.md](./SETUP.md)** - Comprehensive setup guide with troubleshooting
- **[COMPARISON.md](./COMPARISON.md)** - Detailed side-by-side comparison of both approaches

## Learn More

- [React Hook Form Docs](https://react-hook-form.com/)
- [TanStack Query Docs](https://tanstack.com/query/latest)
- [Orval Docs](https://orval.dev/)
- [OpenAPI Specification](https://swagger.io/specification/)

## Project Structure

```
.
â”œâ”€â”€ README.md                       # This file
â”œâ”€â”€ SETUP.md                        # Detailed setup instructions
â”œâ”€â”€ COMPARISON.md                   # In-depth comparison
â”œâ”€â”€ openapi.yaml                    # API specification
â”œâ”€â”€ orval.config.ts                 # Code generation config
â”œâ”€â”€ package.json                    # Dependencies
â”œâ”€â”€ vite.config.ts                  # Vite config
â”œâ”€â”€ tsconfig.json                   # TypeScript config
â”œâ”€â”€ index.html                      # HTML entry
â”‚
â”œâ”€â”€ mock-server/
â”‚   â”œâ”€â”€ server.js                  # Express API server
â”‚   â””â”€â”€ package.json               # Server dependencies
â”‚
â””â”€â”€ src/
    â”œâ”€â”€ main.tsx                   # React entry point
    â”œâ”€â”€ App.tsx                    # Main app component
    â”œâ”€â”€ api/
    â”‚   â”œâ”€â”€ custom-instance.ts     # Axios instance
    â”‚   â”œâ”€â”€ generated.ts           # Generated API client
    â”‚   â””â”€â”€ model/                 # Generated TypeScript types
    â””â”€â”€ components/
        â”œâ”€â”€ TraditionalForm.tsx    # useState approach
        â””â”€â”€ ModernForm.tsx         # Modern approach
```

## Why This Demo?

Many React developers still use the traditional useState approach for forms because:
- It's what they learned first
- They don't know about better alternatives
- They underestimate the boilerplate accumulation

This demo shows **side-by-side** how much simpler forms can be with modern tooling, using a real API and real-world patterns.

## Next Steps

After exploring this demo:

1. Try modifying the forms (add/remove fields)
2. Add a new API endpoint in `openapi.yaml`
3. Regenerate the client and see how easy it is to integrate
4. Read [COMPARISON.md](./COMPARISON.md) for the full analysis
5. Consider adopting this approach in your projects

---

**Made with â¤ï¸ to demonstrate modern React patterns**
